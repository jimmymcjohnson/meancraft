<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mini Minecraft</title>
<style>
  body {
    margin: 0;
    background: #87ceeb;
    overflow: hidden;
  }
  canvas {
    display: block;
    margin: auto;
    background: #6ab04c;
  }
</style>
</head>
<body>

<canvas id="game" width="800" height="600"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

const TILE = 40;
const ROWS = 15;
const COLS = 20;

const blocks = {
  air: "#87ceeb",
  grass: "#2ecc71",
  dirt: "#8e5a2a",
  stone: "#7f8c8d"
};

let selectedBlock = "dirt";

let world = [];
for (let y = 0; y < ROWS; y++) {
  world[y] = [];
  for (let x = 0; x < COLS; x++) {
    world[y][x] = y > 8 ? "dirt" : y === 8 ? "grass" : "air";
  }
}

let player = { x: 10, y: 7 };

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  for (let y = 0; y < ROWS; y++) {
    for (let x = 0; x < COLS; x++) {
      ctx.fillStyle = blocks[world[y][x]];
      ctx.fillRect(x * TILE, y * TILE, TILE, TILE);
      ctx.strokeRect(x * TILE, y * TILE, TILE, TILE);
    }
  }

  ctx.fillStyle = "red";
  ctx.fillRect(player.x * TILE + 8, player.y * TILE + 8, 24, 24);
}

document.addEventListener("keydown", e => {
  if (e.key === "w") player.y--;
  if (e.key === "s") player.y++;
  if (e.key === "a") player.x--;
  if (e.key === "d") player.x++;

  player.x = Math.max(0, Math.min(COLS - 1, player.x));
  player.y = Math.max(0, Math.min(ROWS - 1, player.y));
});

canvas.addEventListener("mousedown", e => {
  const x = Math.floor(e.offsetX / TILE);
  const y = Math.floor(e.offsetY / TILE);

  if (e.button === 0) {
    world[y][x] = "air"; // break block
  }
  if (e.button === 2) {
    world[y][x] = selectedBlock; // place block
  }
});

canvas.addEventListener("contextmenu", e => e.preventDefault());

function loop() {
  draw();
  requestAnimationFrame(loop);
}

loop();
</script>

</body>
</html>
